// unscoped params
workDir = "work"
outputDir = "output"

// workflow params
workflow.output.mode = 'copy'

params {
    // general
    sample_sheet = "/projects/molonc/roth_lab_scratch/dma/courses/BIOF501A_Project/sample_sheet_FL.csv"
    genome = 'hg38' // only hg38
    ref = "/projects/molonc/roth_lab_scratch/dma/courses/CPSC545_project/ref/genome.fa"

    // matched normal phasing
    numbat_matched_normal_phasing = true
    chroms = ['chr1','chr2','chr3','chr4','chr5','chr6','chr7','chr8','chr9','chr10','chr11','chr12','chr13','chr14','chr15','chr16','chr17','chr18','chr19','chr20','chr21','chr22']
    eagle_ref_panel_dir = "/projects/molonc/roth_lab_scratch/dma/courses/BIOF501A_Project/ref/1000G/1000G_hg38"
    eagle_gmap = "/projects/molonc/roth_lab_scratch/dma/courses/BIOF501A_Project/test_data/ref-data/genetic_map_hg38_withX.txt.gz"

    // numbat
    binned_mode = true
    genome1k_snps = "/projects/molonc/roth_lab_scratch/dma/courses/BIOF501A_Project/ref/1000G/genome1K.phase3.SNP_AF5e2.chr1toX.hg38.vcf.gz"
    bin_obj = "/projects/molonc/roth_lab_scratch/dma/Numbat/data/var220kb.rds"
    gene_to_bin = "/projects/molonc/roth_lab_scratch/dma/Numbat/data/var220kb_gene2bin_map.csv"
    parL = "/projects/molonc/roth_lab_scratch/dma/Numbat/data/par_numbatm.rds"
}

process {
    withName: HAPLOTYPECALLER {
        container = 'docker://broadinstitute/gatk:latest'
        cpus = 8
        memory = 32.GB
        time = '16h'
    }
    withName: 'BCFTOOLS.*' {
        container = 'docker://staphb/bcftools:latest'
        cpus = 8
        memory = 32.GB
        time = '8h'
    }
    withName: EAGLE2 {
        container = 'docker://cbao/eagle:v2.4.1'
        cpus = 16
        memory = 32.GB
        time = '12h'
    }
    withName: NUMBAT_RNA_BIN_PREP {
        container = 'docker://dinguwu/numbat:v0.1'
        cpus = 4
        memory = 8.GB
        time = '6h'
    }
    withName: 'NUMBAT.*' {
        container = 'docker://dinguwu/numbat:v0.1'
        cpus = 16
        memory = 32.GB
        time = '12h'
    }
}

profiles {
    local {
        process.executor = 'local'
        singularity.enabled = true
        singularity.autoMounts = true
        process.containerOptions = "--no-home"
    }
    slurm {
        process.executor = 'slurm'
        singularity.enabled = true
        singularity.autoMounts = true
        process.containerOptions = "--no-home"
    }
}
